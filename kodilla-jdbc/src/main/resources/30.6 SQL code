DROP PROCEDURE IF EXISTS INDEX_FOR_LIBRARY_AND_READERS;

DELIMITER $$

CREATE PROCEDURE INDEX_FOR_LIBRARY_AND_READERS()
BEGIN
    CREATE INDEX TITLE_INDEX ON BOOKS (TITLE);

    EXPLAIN
    SELECT COUNT(*)
    FROM READERS
    WHERE FIRSTNAME = 'John';

    CREATE INDEX NAME_AND_SURNAME ON READERS (FIRSTNAME, LASTNAME);

    EXPLAIN
    SELECT COUNT(*)
    FROM READERS
    WHERE FIRSTNAME = 'John';
END $$

DELIMITER ;

DROP INDEX NAME_AND_SURNAME ON READERS;
DROP INDEX TITLE_INDEX ON BOOKS;

CALL INDEX_FOR_LIBRARY_AND_READERS();